# =============================================================================
# Kubernetes Secret - Postgres Credentials
# =============================================================================
#
# What is a K8s Secret?
#   A Secret stores sensitive data (passwords, tokens, keys) separately from
#   your application code. Pods reference Secrets to get credentials at runtime.
#
# Why not just hardcode the password in the deployment YAML?
#   1. Secrets can be encrypted at rest in etcd (K8s data store)
#   2. RBAC can restrict who can read Secrets
#   3. Secrets can be rotated without redeploying the app
#   4. They don't show up in `kubectl describe pod` output
#
# IMPORTANT: In a real production system, you'd use:
#   - External Secrets Operator (syncs from AWS Secrets Manager / Vault)
#   - Sealed Secrets (encrypted in git, decrypted in-cluster)
#   - HashiCorp Vault
#   For local development, plain K8s Secrets are fine.
#
# The values below are base64-encoded. To encode your own:
#   echo -n "your-value" | base64
#
# Decoded values used here:
#   POSTGRES_USER:     retail_user
#   POSTGRES_PASSWORD: retail_pass_2026
#   POSTGRES_DB:       postgres  (the default DB, init script creates the rest)
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  namespace: retail-data
type: Opaque
data:
  # echo -n "retail_user" | base64
  POSTGRES_USER: cmV0YWlsX3VzZXI=
  # echo -n "retail_pass_2026" | base64
  POSTGRES_PASSWORD: cmV0YWlsX3Bhc3NfMjAyNg==
  # echo -n "postgres" | base64
  POSTGRES_DB: cG9zdGdyZXM=
